import{n as t,g as e,X as o,r as n,f as s,w as r,al as i,am as a,an as l,u as c,a5 as d}from"./framework.8eb2d2ed.js";function p(t,e={},o){for(const n in t){const s=t[n],r=o?`${o}:${n}`:n;"object"==typeof s&&null!==s?p(s,e,r):"function"==typeof s&&(e[r]=s)}return e}const u={run:t=>t()},f=void 0!==console.createTask?console.createTask:()=>u;function h(t,e){const o=e.shift(),n=f(o);return t.reduce(((t,o)=>t.then((()=>n.run((()=>o(...e)))))),Promise.resolve())}function g(t,e){const o=e.shift(),n=f(o);return Promise.all(t.map((t=>n.run((()=>t(...e))))))}function y(t,e){for(const o of[...t])o(e)}class m{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,o={}){if(!t||"function"!=typeof e)return()=>{};const n=t;let s;for(;this._deprecatedHooks[t];)s=this._deprecatedHooks[t],t=s.to;if(s&&!o.allowDeprecated){let t=s.message;t||(t=`${n} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(t)||(console.warn(t),this._deprecatedMessages.add(t))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let o,n=(...t)=>("function"==typeof o&&o(),o=void 0,n=void 0,e(...t));return o=this.hook(t,n),o}removeHook(t,e){if(this._hooks[t]){const o=this._hooks[t].indexOf(e);-1!==o&&this._hooks[t].splice(o,1),0===this._hooks[t].length&&delete this._hooks[t]}}deprecateHook(t,e){this._deprecatedHooks[t]="string"==typeof e?{to:e}:e;const o=this._hooks[t]||[];delete this._hooks[t];for(const n of o)this.hook(t,n)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=p(t),o=Object.keys(e).map((t=>this.hook(t,e[t])));return()=>{for(const t of o.splice(0,o.length))t()}}removeHooks(t){const e=p(t);for(const o in e)this.removeHook(o,e[o])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...e){return e.unshift(t),this.callHookWith(h,t,...e)}callHookParallel(t,...e){return e.unshift(t),this.callHookWith(g,t,...e)}callHookWith(t,e,...o){const n=this._before||this._after?{name:e,args:o,context:{}}:void 0;this._before&&y(this._before,n);const s=t(e in this._hooks?[...this._hooks[e]]:[],o);return s instanceof Promise?s.finally((()=>{this._after&&n&&y(this._after,n)})):(this._after&&n&&y(this._after,n),s)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(void 0!==this._before){const e=this._before.indexOf(t);-1!==e&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(void 0!==this._after){const e=this._after.indexOf(t);-1!==e&&this._after.splice(e,1)}}}}const _=["title","script","style","noscript"],v=["base","meta","link","style","script","noscript"],k=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],b=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],H=["tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent"];function $(t){let e=9;for(let o=0;o<t.length;)e=Math.imul(e^t.charCodeAt(o++),9**9);return(65536+(e^e>>>9)).toString(16).substring(1,8).toLowerCase()}function w(t){return $(`${t.tag}:${t.textContent||t.innerHTML||""}:${Object.entries(t.props).map((([t,e])=>`${t}:${String(e)}`)).join(",")}`)}function x(t,e){const{props:o,tag:n}=t;if(b.includes(n))return n;if("link"===n&&"canonical"===o.rel)return"canonical";if(o.charset)return"charset";const s=["id"];"meta"===n&&s.push("name","property","http-equiv");for(const r of s)if(void 0!==o[r]){const t=String(o[r]);return!(e&&!e(t))&&`${n}:${r}:${t}`}return!1}function O(t,e){return null==t?e||null:"function"==typeof t?t(e):t}function C(t,e=!1,o){const{tag:n,$el:s}=t;s&&(Object.entries(n.props).forEach((([n,r])=>{r=String(r);const i=`attr:${n}`;if("class"!==n)o&&!n.startsWith("data-h-")&&o(t,i,(()=>s.removeAttribute(n))),(e||s.getAttribute(n)!==r)&&s.setAttribute(n,r);else{if(!r)return;for(const e of r.split(" ")){o&&o(t,`${i}:${e}`,(()=>s.classList.remove(e))),s.classList.contains(e)||s.classList.add(e)}}})),_.includes(n.tag)&&(n.textContent&&n.textContent!==s.textContent?s.textContent=n.textContent:n.innerHTML&&n.innerHTML!==s.innerHTML&&(s.innerHTML=n.innerHTML)))}let T=!1;async function A(t,e={}){var o,n;const s={shouldRender:!0};if(await t.hooks.callHook("dom:beforeRender",s),!s.shouldRender)return;const r=e.document||t.resolvedOptions.document||window.document,i=(await t.resolveTags()).map((function(e){const o=t.headEntries().find((t=>t._i===e._e)),n={renderId:e._d||w(e),$el:null,shouldRender:!0,tag:e,entry:o,markSideEffect:(t,e)=>l(n,t,e)};return n}));if(t.resolvedOptions.experimentalHashHydration&&(T=T||t._hash||!1,T)){const t=function(t){let e=9;for(const o of t)for(let t=0;t<o.length;)e=Math.imul(e^o.charCodeAt(t++),9**9);return(65536+(e^e>>>9)).toString(16).substring(1,8).toLowerCase()}(i.map((t=>t.tag._h)));if(T===t)return;T=t}const a=t._popSideEffectQueue();t.headEntries().map((t=>t._sde)).forEach((t=>{Object.entries(t).forEach((([t,e])=>{a[t]=e}))}));const l=(t,e,o)=>{e=`${t.renderId}:${e}`,t.entry&&(t.entry._sde[e]=o),delete a[e]};const c=[],d={body:[],head:[]},p=e=>{t._elMap[e.renderId]=e.$el,c.push(e),l(e,"el",(()=>{var o;null==(o=e.$el)||o.remove(),delete t._elMap[e.renderId]}))};for(const f of i){if(await t.hooks.callHook("dom:beforeRenderTag",f),!f.shouldRender)continue;const{tag:e}=f;"title"!==e.tag?"htmlAttrs"!==e.tag&&"bodyAttrs"!==e.tag?(f.$el=t._elMap[f.renderId],!f.$el&&e.key&&(f.$el=r.querySelector(`${(null==(o=e.tagPosition)?void 0:o.startsWith("body"))?"body":"head"} > ${e.tag}[data-h-${e._h}]`)),f.$el?(f.tag._d&&C(f),p(f)):d[(null==(n=e.tagPosition)?void 0:n.startsWith("body"))?"body":"head"].push(f)):(f.$el=r["htmlAttrs"===e.tag?"documentElement":"body"],C(f,!1,l),c.push(f)):(r.title=e.textContent||"",c.push(f))}const u={bodyClose:void 0,bodyOpen:void 0,head:void 0};Object.entries(d).forEach((([t,e])=>{var o;if(!e.length)return;const n=null==(o=null==r?void 0:r[t])?void 0:o.children;if(n){for(const t of[...n].reverse()){const o=t.tagName.toLowerCase();if(!v.includes(o))continue;const n={tag:o,props:t.getAttributeNames().reduce(((e,o)=>({...e,[o]:t.getAttribute(o)})),{})};t.innerHTML&&(n.innerHTML=t.innerHTML);const s=w(n);let r=e.findIndex((t=>(null==t?void 0:t.renderId)===s));if(-1===r){const t=x(n);r=e.findIndex((e=>(null==e?void 0:e.tag._d)&&e.tag._d===t))}if(-1!==r){const o=e[r];o.$el=t,C(o),p(o),delete e[r]}}e.forEach((t=>{const e=t.tag.tagPosition||"head";u[e]=u[e]||r.createDocumentFragment(),t.$el||(t.$el=r.createElement(t.tag.tag),C(t,!0)),u[e].appendChild(t.$el),p(t)}))}})),u.head&&r.head.appendChild(u.head),u.bodyOpen&&r.body.insertBefore(u.bodyOpen,r.body.firstChild),u.bodyClose&&r.body.appendChild(u.bodyClose);for(const f of c)await t.hooks.callHook("dom:renderTag",f);Object.values(a).forEach((t=>t()))}let j=null;async function E(t,e={}){const o=e.delayFn||(t=>setTimeout(t,10));return j=j||new Promise((n=>o((()=>n((j=null,A(t,e)))))))}function P(t){return{hooks:{"entries:updated":function(e){if(void 0===(null==t?void 0:t.document)&&"undefined"==typeof window)return;let o=null==t?void 0:t.delayFn;o||"undefined"==typeof requestAnimationFrame||(o=requestAnimationFrame),E(e,{document:(null==t?void 0:t.document)||window.document,delayFn:o})}}}}const M={base:-1,title:1},L={critical:-8,high:-1,low:2};function S(t){let e=10;const o=t.tagPriority;return"number"==typeof o?o:("meta"===t.tag?(t.props.charset&&(e=-2),"content-security-policy"===t.props["http-equiv"]&&(e=0)):t.tag in M&&(e=M[t.tag]),"string"==typeof o&&o in L?e+L[o]:e)}const W=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];const I=["link","style","script","noscript"];const R=["script","link","bodyAttrs"];function F(){const t=(t,e)=>{const o={},n={};let s;return Object.entries(e.props).forEach((([t,e])=>{t.startsWith("on")&&"function"==typeof e?n[t]=e:o[t]=e})),"dom"===t&&"script"===e.tag&&"string"==typeof o.src&&void 0!==n.onload&&(s=o.src,delete o.src),{props:o,eventHandlers:n,delayedSrc:s}};return{hooks:{"ssr:render":function(e){e.tags=e.tags.map((e=>R.includes(e.tag)&&Object.entries(e.props).find((([t,e])=>t.startsWith("on")&&"function"==typeof e))?(e.props=t("ssr",e).props,e):e))},"dom:beforeRenderTag":function(e){if(!R.includes(e.tag.tag))return;if(!Object.entries(e.tag.props).find((([t,e])=>t.startsWith("on")&&"function"==typeof e)))return;const{props:o,eventHandlers:n,delayedSrc:s}=t("dom",e.tag);Object.keys(n).length&&(e.tag.props=o,e.tag._eventHandlers=n,e.tag._delayedSrc=s)},"dom:renderTag":function(t){const e=t.$el;if(!t.tag._eventHandlers||!e)return;const o="bodyAttrs"===t.tag.tag&&"undefined"!=typeof window?window:e;Object.entries(t.tag._eventHandlers).forEach((([n,s])=>{const r=`${t.tag._d||t.tag._p}:${n}`,i=n.slice(2).toLowerCase(),a=`data-h-${i}`;if(t.markSideEffect(r,(()=>{})),e.hasAttribute(a))return;const l=s;e.setAttribute(a,""),o.addEventListener(i,l),t.entry&&(t.entry._sde[r]=()=>{o.removeEventListener(i,l),e.removeAttribute(a)})})),t.tag._delayedSrc&&e.setAttribute("src",t.tag._delayedSrc)}}}}const q=["templateParams","htmlAttrs","bodyAttrs"];function D(t,e){if("string"!=typeof t)return t;let o=t;try{o=decodeURI(t)}catch{}(o.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach((o=>{const n=function(t){if(["s","pageTitle"].includes(t))return e.pageTitle;let o;return o=t.includes(".")?t.split(".").reduce(((t,e)=>t&&t[e]||void 0),e):e[t],void 0!==o&&(o||"")}(o.slice(1));"string"==typeof n&&(t=t.replace(new RegExp(`\\${o}(\\W|$)`,"g"),`${n}$1`).trim())}));const n=e.separator;return t.includes(n)&&(t.endsWith(n)&&(t=t.slice(0,-n.length).trim()),t.startsWith(n)&&(t=t.slice(n.length).trim()),t=t.replace(new RegExp(`\\${n}\\s*\\${n}`,"g"),n)),t}const N="undefined"!=typeof window;let B;async function J(t,e){const o={tag:t,props:{}};return e instanceof Promise&&(e=await e),"templateParams"===t?(o.props=e,o):["title","titleTemplate"].includes(t)?(e&&"object"==typeof e?(o.textContent=e.textContent,e.tagPriority&&(o.tagPriority=e.tagPriority)):o.textContent=e,o):"string"==typeof e?!!["script","noscript","style"].includes(t)&&("script"===t&&(/^(https?:)?\/\//.test(e)||e.startsWith("/"))?o.props.src=e:o.innerHTML=e,o):(o.props=await async function(t,e){for(const o of Object.keys(e)){const t=o.startsWith("data-");e[o]instanceof Promise&&(e[o]=await e[o]),"true"===String(e[o])?e[o]=t?"true":"":"false"===String(e[o])&&(t?e[o]="false":delete e[o])}return e}(0,{...e}),o.props.children&&(o.props.innerHTML=o.props.children),delete o.props.children,Object.keys(o.props).filter((t=>H.includes(t))).forEach((t=>{["innerHTML","textContent"].includes(t)&&!_.includes(o.tag)||(o[t]=o.props[t]),delete o.props[t]})),["innerHTML","textContent"].forEach((t=>{if("script"===o.tag&&"string"==typeof o[t]&&["application/ld+json","application/json"].includes(o.props.type))try{o[t]=JSON.parse(o[t])}catch(e){o[t]=""}"object"==typeof o[t]&&(o[t]=JSON.stringify(o[t]))})),o.props.class&&(o.props.class=function(t){"object"!=typeof t||Array.isArray(t)||(t=Object.keys(t).filter((e=>t[e])));return(Array.isArray(t)?t.join(" "):t).split(" ").filter((t=>t.trim())).filter(Boolean).join(" ")}(o.props.class)),o.props.content&&Array.isArray(o.props.content)?o.props.content.map((t=>({...o,props:{...o.props,content:t}}))):o)}const Q=10;async function U(t){const e=[];return Object.entries(t.resolvedInput).filter((([t,e])=>void 0!==e&&k.includes(t))).forEach((([t,o])=>{const n=function(t){return Array.isArray(t)?t:[t]}(o);e.push(...n.map((e=>J(t,e))).flat())})),(await Promise.all(e)).flat().filter(Boolean).map(((e,o)=>(e._e=t._i,e._p=(t._i<<Q)+o,e)))}function X(){return[{hooks:{"tag:normalise":function({tag:t}){["hid","vmid","key"].forEach((e=>{t.props[e]&&(t.key=t.props[e],delete t.props[e])}));const e=x(t)||!!t.key&&`${t.tag}:${t.key}`;e&&(t._d=e)},"tags:resolve":function(t){const e={};t.tags.forEach((t=>{const o=(t.key?`${t.tag}:${t.key}`:t._d)||t._p,n=e[o];if(n){let s=null==t?void 0:t.tagDuplicateStrategy;if(!s&&q.includes(t.tag)&&(s="merge"),"merge"===s){const s=n.props;return["class","style"].forEach((e=>{t.props[e]&&s[e]&&("style"!==e||s[e].endsWith(";")||(s[e]+=";"),t.props[e]=`${s[e]} ${t.props[e]}`)})),void(e[o].props={...s,...t.props})}if(t._e===n._e)return n._duped=n._duped||[],t._d=`${n._d}:${n._duped.length+1}`,void n._duped.push(t);if(S(t)>S(n))return}const s=Object.keys(t.props).length+(t.innerHTML?1:0)+(t.textContent?1:0);v.includes(t.tag)&&0===s?delete e[o]:e[o]=t}));const o=[];Object.values(e).forEach((t=>{const e=t._duped;delete t._duped,o.push(t),e&&o.push(...e)})),t.tags=o}}},{hooks:{"tags:resolve":t=>{const e=e=>{var o;return null==(o=t.tags.find((t=>t._d===e)))?void 0:o._p};for(const{prefix:o,offset:n}of W)for(const s of t.tags.filter((t=>"string"==typeof t.tagPriority&&t.tagPriority.startsWith(o)))){const t=e(s.tagPriority.replace(o,""));void 0!==t&&(s._p=t+n)}t.tags.sort(((t,e)=>t._p-e._p)).sort(((t,e)=>S(t)-S(e)))}}},{hooks:{"tags:resolve":t=>{var e;const{tags:o}=t,n=null==(e=o.find((t=>"title"===t.tag)))?void 0:e.textContent,s=o.findIndex((t=>"templateParams"===t.tag)),r=-1!==s?o[s].props:{};r.separator=r.separator||"|",r.pageTitle=D(r.pageTitle||n||"",r);for(const i of o)if(["titleTemplate","title"].includes(i.tag)&&"string"==typeof i.textContent)i.textContent=D(i.textContent,r);else if("meta"===i.tag&&"string"==typeof i.props.content)i.props.content=D(i.props.content,r);else if("link"===i.tag&&"string"==typeof i.props.href)i.props.href=D(i.props.href,r);else if("script"===i.tag&&["application/json","application/ld+json"].includes(i.props.type)&&"string"==typeof i.innerHTML)try{i.innerHTML=JSON.stringify(JSON.parse(i.innerHTML),((t,e)=>"string"==typeof e?D(e,r):e))}catch{}t.tags=o.filter((t=>"templateParams"!==t.tag))}}},{hooks:{"tags:resolve":t=>{const{tags:e}=t;let o=e.findIndex((t=>"titleTemplate"===t.tag));const n=e.findIndex((t=>"title"===t.tag));if(-1!==n&&-1!==o){const t=O(e[o].textContent,e[n].textContent);null!==t?e[n].textContent=t||e[n].textContent:delete e[n]}else if(-1!==o){const t=O(e[o].textContent);null!==t&&(e[o].textContent=t,e[o].tag="title",o=-1)}-1!==o&&delete e[o],t.tags=e.filter(Boolean)}}},{hooks:{"tag:normalise":({tag:t,resolvedOptions:e})=>{!0===e.experimentalHashHydration&&(t._h=w(t)),t.key&&I.includes(t.tag)&&(t._h=$(t.key),t.props[`data-h-${t._h}`]="")}}},F(),{hooks:{"tag:normalise":function({tag:t}){void 0!==t.props.body&&(t.tagPosition="bodyClose",delete t.props.body)}}}]}function z(t={}){return[P({document:null==t?void 0:t.document,delayFn:null==t?void 0:t.domDelayFn})]}function G(t={}){const e=function(t={}){let e=[],o={},n=0;const s=new m;(null==t?void 0:t.hooks)&&s.addHooks(t.hooks);t.plugins=[...X(),...(null==t?void 0:t.plugins)||[]],t.plugins.forEach((t=>t.hooks&&s.addHooks(t.hooks))),t.document=t.document||(N?document:void 0);const r=()=>s.callHook("entries:updated",i),i={resolvedOptions:t,headEntries:()=>e,get hooks(){return s},use(t){t.hooks&&s.addHooks(t.hooks)},push(t,s){const i={_i:n++,input:t,_sde:{}};return(null==s?void 0:s.mode)&&(i._m=null==s?void 0:s.mode),(null==s?void 0:s.transform)&&(i._t=null==s?void 0:s.transform),e.push(i),r(),{dispose(){e=e.filter((t=>t._i!==i._i||(o={...o,...t._sde||{}},t._sde={},r(),!1)))},patch(t){e=e.map((e=>(e._i===i._i&&(i.input=e.input=t,r()),e)))}}},async resolveTags(){const t={tags:[],entries:[...e]};await s.callHook("entries:resolve",t);for(const e of t.entries){const o=e._t||(t=>t);if(e.resolvedInput=o(e.resolvedInput||e.input),e.resolvedInput)for(const n of await U(e)){const o={tag:n,entry:e,resolvedOptions:i.resolvedOptions};await s.callHook("tag:normalise",o),t.tags.push(o.tag)}}return await s.callHook("tags:resolve",t),t.tags},_popSideEffectQueue(){const t={...o};return o={},t},_elMap:{}};return i.hooks.callHook("init",i),i}({...t,plugins:[...z(t),...(null==t?void 0:t.plugins)||[]]});var o,n;return t.experimentalHashHydration&&e.resolvedOptions.document&&(e._hash=(o=e.resolvedOptions.document,(null==(n=null==o?void 0:o.head.querySelector('meta[name="unhead:ssr"]'))?void 0:n.getAttribute("content"))||!1)),function(t){B=t}(e),e}function K(t,e=""){if(t instanceof Promise)return t;const o="function"==typeof(n=t)?n():c(n);var n;return t&&o?Array.isArray(o)?o.map((t=>K(t,e))):"object"==typeof o?Object.fromEntries(Object.entries(o).map((([t,e])=>"titleTemplate"===t||t.startsWith("on")?[t,c(e)]:[t,K(e,t)]))):o:o}const V=d.startsWith("3"),Y="undefined"!=typeof window,Z="usehead";function tt(){return e()&&o(Z)||B}function et(e={}){const o=G({...e,domDelayFn:e=>setTimeout((()=>t((()=>e()))),10),plugins:[{hooks:{"entries:resolve":function(t){for(const e of t.entries)e.resolvedInput=K(e.input)}}},...(null==e?void 0:e.plugins)||[]]});return o.install=function(t){return{install(e){V&&(e.config.globalProperties.$unhead=t,e.config.globalProperties.$head=t,e.provide(Z,t))}}.install}(o),o}function ot(t,o={}){var c;const d=tt();if(d){const p=Y||!!(null==(c=d.resolvedOptions)?void 0:c.document);if("server"===o.mode&&p||"client"===o.mode&&!p)return;return p?function(t,o={}){const c=tt(),d=n(!1),p=n({});s((()=>{p.value=d.value?{}:K(t)}));const u=c.push(p.value,o);return r(p,(t=>{u.patch(t)})),e()&&(i((()=>{u.dispose()})),a((()=>{d.value=!0})),l((()=>{d.value=!1}))),u}(t,o):function(t,e={}){return tt().push(t,e)}(t,o)}}export{et as c,E as d,A as r,ot as u};
